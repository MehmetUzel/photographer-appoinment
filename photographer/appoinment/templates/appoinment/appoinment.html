{% extends 'homepage/base.html' %}
{% block title %}
Appoinment
{% endblock %}

{%block content%}
<h1>Anasayfa</h1>

{% for x in days%}
    
    <table border="2" cellpadding="2" cellspacing="2" class="month">
        <tr>
            <th colspan="7" class="month">{{ x.0.0|date:"F o" }}</th>
        </tr>
        <tr>
            <th class="Mon">Pazartesi</th>
            <th class="Tue">&nbsp;&nbsp;&nbsp;Salı&nbsp;&nbsp;</th>
            <th class="Wed">&nbsp;Çarşamba</th>
            <th class="Thu">&nbsp;Perşembe</th>
            <th class="Fri">&nbsp;&nbsp;&nbsp;Cuma&nbsp;&nbsp;</th>
            <th class="Sat">Cumartesi</th>
            <th class="Sun">&nbsp;&nbsp;Pazar&nbsp;&nbsp;</th>
        </tr>
    {% for y in x %}
        <tr>
        {% for z in y %}
            <td class="{{z|date:"D"}}">{{z|date:"j"}}</td>
        {% endfor %}
        </tr>
    {% endfor %}
    <br>
{% endfor %}
<div >
<input type="submit" id='opp' value="Previous" onclick="previous()">
<input type="submit" id='opp' value="Next" onclick="next()">
</div>


    <div>
        <ul id="date-group"></ul>
    </div>
{%endblock%}

{% block script %} 
<script>
    var current = -1
    var month = 0
    function next(){
        const list = document.getElementById("date-group");
        current += 1
        while (list.hasChildNodes()) {
        list.removeChild(list.firstChild);
        }
        var data = JSON.parse("{{data|escapejs}}");
        
        if (current == data[month].length) {
            month += 1
            current = 0
            if (month == data.length){
                month = 0
            }

        }
        // let's just print the data in the console for now
        var temp = `<li>
            <p>${data[month][current]}</p>
        <li>
        `
        
        document.getElementById("date-group").innerHTML += temp;
      
    }
    function previous(){
        const list = document.getElementById("date-group");
        current -= 1
        while (list.hasChildNodes()) {
        list.removeChild(list.firstChild);
        }
        var data = JSON.parse("{{data|escapejs}}");
        
        if (current <= -1) {
            month -= 1
            current = 0
            if (month <= -1){
                month = data.length-1
            }

        }
        // let's just print the data in the console for now
        var temp = `<li>
            <p>${data[month][current]}</p>
        <li>
        `
        
        document.getElementById("date-group").innerHTML += temp;
      
    }
    
  </script>
  {%endblock%}

